(function(e){function t(t){for(var i,a,c=t[0],s=t[1],l=t[2],d=0,p=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={app:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"023d":function(e,t,n){"use strict";var i=n("cccf"),o=n.n(i);o.a},"16d6":function(e,t,n){"use strict";var i=n("509f"),o=n.n(i);o.a},"2d08":function(e,t,n){(function(e){n("4de4"),n("4160"),n("c975"),n("a15b"),n("d81d"),n("13d5"),n("4fad"),n("d3b7"),n("ac1f"),n("25f0"),n("4d90"),n("1276"),n("159b");var i=n("7037"),o=n("970b"),r=n("5bc3"),a=n("9523"),c=n("448a");(function(){var n=function(e,t){0===e.className.split(" ").filter((function(e){return e===t})).length&&(e.className+=" ".concat(t))},s=function(e,t){e.className=e.className.split(" ").filter((function(e){return e!==t})).join(" ")},l=function(e,t,n){return Math.max(Math.min(e,t),n)},u=function(e){var t={h:0,s:0,b:0};if(0===e.indexOf("#")&&(e=e.substring(1)),3===e.length&&(e=e.split("").map((function(e){return e+e})).join("")),6!==e.length)return!1;e=[e.substr(0,2),e.substr(2,2),e.substr(4,2)].map((function(e){return parseInt(e,16)}));var n={r:e[0],g:e[1],b:e[2]},i=Math.max.apply(Math,c(e)),o=Math.min.apply(Math,c(e));return i===o?t.h=0:i===n.r&&n.g>=n.b?t.h=60*(n.g-n.b)/(i-o)+0:i===n.r&&n.g<n.b?t.h=60*(n.g-n.b)/(i-o)+360:i===n.g?t.h=60*(n.b-n.r)/(i-o)+120:i===n.b&&(t.h=60*(n.r-n.g)/(i-o)+240),t.s=0===i?0:1-o/i,t.b=i/255,t},d=function(e){e=1-e;var t={r:void 0,g:void 0,b:void 0},n=6*e;return Object.entries(t).reduce((function(e,t,i){return Object.assign(e,a({},t[0],Math.floor(function(){var e=(i+1)%3*2,t=e+2,o=n-e,r=t-n;if(o>=0&&r>=0)return 0;var a=Math.min(Math.abs(o),Math.abs(r),Math.abs(6-o),Math.abs(6-r));return Math.min(255,255*a)}())))}),{})},p=function(e,t,n){var i=d(e);for(var o in i)i[o]=(255-i[o])*(1-t)+i[o],i[o]=i[o]*(1-n);return i},b=function(e){var t=e.r,n=e.g,i=e.b;return Math.floor(t).toString(16).padStart(2,"0")+Math.floor(n).toString(16).padStart(2,"0")+Math.floor(i).toString(16).padStart(2,"0")},h=function(e){return{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)}},v=function(e){return document.createElement(e)},f=function(){"use strict";function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.dom,a=void 0===r?v("div"):r,c=(i.input,i.value),s=void 0===c?"FFF":c;o(this,e),this.dom=a;var l=this;Array.prototype.forEach.call(this.getDOM().children,(function(e){e.remove()})),n(a,"color-picker");var u=v("div");u.className="color-picker-right-bar";var d=v("div");d.className="color-picker-right-bar-picker",u.appendChild(d);var b=v("div");b.className="color-picker-color-block";var h=v("div");h.className="color-picker-gradients color-picker-gradient-color";var f=v("div");f.className="color-picker-gradients color-picker-gradient-black",h.style.background="linear-gradient(to right,#FFFFFF,#FF0000)";var g=v("div");g.className="color-picker-circle",f.appendChild(g);var m=v("input"),k=v("div");k.className="color-picker-input",m.maxLength=6,m.style.width="100%",m.style.height="100%",m.type="text",k.appendChild(m),this.getDOM().appendChild(u),this.getDOM().appendChild(b),this.getDOM().appendChild(k),this.getDOM().appendChild(h),this.getDOM().appendChild(f),m.addEventListener("change",(function(){t.setValue(m.value,!0),t.onchange(),t.updatePicker()})),this.textInput=m,this._gradientBlack=f,this._gradientColor=h,this._rightBar=u,this._rightBarPicker=d,this._colorBlock=b,this._gradientCircle=g,this._height=0,this._mouseX=0,this._mouseY=0,this.setValue(s,!0),this._lastValue=this.value,this.updatePicker();var y=function e(n){window.addEventListener("mouseup",(function t(){l.getDOM().style.userSelect="text",window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}));var i=l._gradientBlack.getBoundingClientRect();t._mouseX=n.clientX-i.left,t._mouseY=n.clientY-i.top,t.mouseBorder(),t.setValue(p(t.height,t.position.x,t.position.y)),t.updatePicker()},_=function e(n){window.addEventListener("mouseup",(function t(){l.getDOM().style.userSelect="text",window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}));var i=l._rightBar.getBoundingClientRect();t._height=n.clientY-i.top,t.mouseBorderBar(),t.setValue(p(t.height,t.position.x,t.position.y)),t.updatePicker()};if(this._gradientBlack.addEventListener("mousedown",(function(e){t.getDOM().style.userSelect="none",y(e),window.addEventListener("mousemove",y)})),this._rightBar.addEventListener("mousedown",(function(e){t.getDOM().style.userSelect="none",_(e),window.addEventListener("mousemove",_)})),"ontouchstart"in window){var O=function(e){e.preventDefault(),e=e.touches[0];var n=l._gradientBlack.getBoundingClientRect();t._mouseX=e.clientX-n.left,t._mouseY=e.clientY-n.top,t.mouseBorder(),t.setValue(p(t.height,t.position.x,t.position.y)),t.updatePicker()},w=function(e){e.preventDefault(),e=e.touches[0];var n=t._rightBar.getBoundingClientRect();t._height=e.clientY-n.top,t.mouseBorderBar(),t.setValue(p(t.height,t.position.x,t.position.y)),t.updatePicker()};this._gradientBlack.addEventListener("touchmove",O),this._gradientBlack.addEventListener("touchstart",O),this._rightBar.addEventListener("touchmove",w),this._rightBar.addEventListener("touchstart",w)}this._changeFunctions=[]}return r(e,[{key:"onchange",value:function(){var e=this;this._changeFunctions.forEach((function(t){return t({target:e,type:"change",timeStamp:performance.now()})}))}},{key:"addEventListener",value:function(e,t){if("function"===typeof t)switch(e){case"change":this._changeFunctions.push(t);break}}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value";switch(e){case"hex":return this._value;case"rgb":return h(this.getValue("hex"));case"hsb":return u(this.getValue("hex"));case"value":default:return"#"+this._value}}},{key:"getBrightness",value:function(){var e=this.getValue("rgb"),t=e.r,n=e.g,i=e.b;return.299*t+.587*n+.114*i}},{key:"setValue",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o="";switch(i(e)){case"string":0===e.indexOf("#")&&(e=e.substring(1)),3===e.length&&(e=e.split("").map((function(e){return e+e})).join("")),6!==e.length&&(e="FFFFFF"),o=e;break;case"object":o=b(e)}try{t=h(o)}catch(f){t={r:255,g:255,b:255}}var r=t,a=r.r,c=r.g,s=r.b;if(this._value=b({r:a,g:c,b:s}).toUpperCase(),this.textInput.value=this._value,this._colorBlock.style.backgroundColor=this.getValue(),n){var l=u(o),d=l.h,p=l.s,v=l.b;this._height=1-d/360,0===d&&(this._height=0),this._mouseX=p,this._mouseY=1-v}else this._lastValue!==this.value&&this.onchange();this._lastValue=this.value}},{key:"getDOM",value:function(){return this.dom}},{key:"mouseBorder",value:function(){this._mouseX=l(this._mouseX/(this._gradientBlack.getBoundingClientRect().width-2),1,0),this._mouseY=l(this._mouseY/(this._gradientBlack.getBoundingClientRect().height-2),1,0)}},{key:"mouseBorderBar",value:function(){this._height=l(this._height/(this._rightBar.getBoundingClientRect().height-2),1,0)}},{key:"updatePicker",value:function(){var e=this.position,t=this._gradientCircle;t.style.left="".concat(100*e.x,"%"),t.style.top="".concat(100*e.y,"%"),this._rightBarPicker.style.top="".concat(100*this.height,"%"),this._gradientColor.style.background="linear-gradient(to right,#FFFFFF,#".concat(b(d(this.height)),")"),this.getBrightness()>152?(n(t,"color-picker-circle-black"),s(t,"color-picker-circle-white")):(s(t,"color-picker-circle-black"),n(t,"color-picker-circle-white"))}},{key:"position",get:function(){return{x:this._mouseX,y:this._mouseY}}},{key:"height",get:function(){return this._height}},{key:"value",get:function(){return this.getValue()},set:function(e){this.setValue(e,!0),this.updatePicker()}}]),e}();e&&"object"===i(t)?e.exports.ColorPicker=f:"object"===("undefined"===typeof window?"undefined":i(window))&&(window.ColorPicker=f)})()}).call(this,n("62e4")(e))},3940:function(e,t,n){"use strict";var i=n("4fcd"),o=n.n(i);o.a},"4fcd":function(e,t,n){},"509f":function(e,t,n){},5161:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"market_color_deals"}},[e._m(0),n("div",{staticClass:"widget-container"},[n("transition-group",{attrs:{name:"list-complete",tag:"p"}},e._l(e.$store.state.conditions,(function(t,i){return n("div",{key:i,staticClass:"repeater-container list-complete-item"},[n("RepeaterCondition",{attrs:{title:t.title,conditionsArray:t.settings},on:{change_state:function(t){return e.updateStatefromChild(i,t)}}}),n("div",{staticClass:"controls"},[e.$store.state.conditions.length>1?n("div",{staticClass:"delete",on:{click:function(t){return e.deleteCondition(i)}}},[e._v("Удалить")]):e._e(),n("div",{staticClass:"picker"},[n("ColorPicker",{attrs:{index:i,bgColor:e.$store.state.conditions[i].color}})],1),n("div",{staticClass:"checks"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.$store.state.conditions[i].isBorder,expression:"$store.state.conditions[index].isBorder"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.$store.state.conditions[i].isBorder)?e._i(e.$store.state.conditions[i].isBorder,null)>-1:e.$store.state.conditions[i].isBorder},on:{change:function(t){var n=e.$store.state.conditions[i].isBorder,o=t.target,r=!!o.checked;if(Array.isArray(n)){var a=null,c=e._i(n,a);o.checked?c<0&&e.$set(e.$store.state.conditions[i],"isBorder",n.concat([a])):c>-1&&e.$set(e.$store.state.conditions[i],"isBorder",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(e.$store.state.conditions[i],"isBorder",r)}}}),n("div",{staticClass:"label"},[n("div",{staticClass:"tick"})]),e._v(" Рамка ")]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.$store.state.conditions[i].isBg,expression:"$store.state.conditions[index].isBg"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.$store.state.conditions[i].isBg)?e._i(e.$store.state.conditions[i].isBg,null)>-1:e.$store.state.conditions[i].isBg},on:{change:function(t){var n=e.$store.state.conditions[i].isBg,o=t.target,r=!!o.checked;if(Array.isArray(n)){var a=null,c=e._i(n,a);o.checked?c<0&&e.$set(e.$store.state.conditions[i],"isBg",n.concat([a])):c>-1&&e.$set(e.$store.state.conditions[i],"isBg",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(e.$store.state.conditions[i],"isBg",r)}}}),n("div",{staticClass:"label"},[n("div",{staticClass:"tick"})]),e._v(" Фон ")])])])],1)})),0),n("div",{staticClass:"flex"},[n("div",{staticClass:"market-row"},[n("a",{staticClass:"market-add-row",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addConditionsGroup(t)}}},[e._v("Добавить группу")])]),n("div",{staticClass:"market-row"},[n("button",{staticClass:"button-input button-input_blue",attrs:{type:"submit"}},[n("span",{staticClass:"button-input-inner__text",on:{click:e.save}},[e._v("Сохранить")]),e._m(1)])])])],1)])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"market-message"}},[n("span")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"button-input__spinner"},[n("span",{staticClass:"button-input__spinner__icon spinner-icon spinner-icon-white"})])}],a=(n("a434"),n("d3b7"),n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"deal-block"},[n("div",{staticClass:"title"},[e._v(e._s(e.title))]),n("transition-group",{attrs:{name:"cond-list",tag:"ul"}},e._l(e.conditionsArray,(function(t,i){return n("li",{key:i,staticClass:"conditions list-complete-item"},[n("div",{staticClass:"row-block"},[n("Condition",{attrs:{blockObject:t},on:{child_input:function(t){return e.changingChild(i,t)}}}),n("Variants",{attrs:{isActive:"true"===t.isActive||!0===t.isActive},on:{selecting:function(t){return e.selectingVar(i,t)}}})],1),n("div",{staticClass:"controls"},[n("div",{staticClass:"control add",on:{click:function(t){return e.addCondition(i)}}},[e._v("+")]),n("div",{staticClass:"control change",on:{click:function(t){return e.changeCondition(i)}}},[e._v("#")]),0!=i||e.conditionsArray.length>1?n("div",{staticClass:"control remove",on:{click:function(t){return e.deleteCondition(i)}}},[n("svg",{staticClass:"svg-icon svg-controls--button-unlink-dims js-linked-entity-unlink",attrs:{title:"Удалить"}},[n("path",{staticClass:"fgcls-1",attrs:{id:"fgDelete",d:"M7923 391a7 7 0 117-7 7 7 0 01-7 7zm0-12.963a5.963 5.963 0 105.96 5.963 5.963 5.963 0 00-5.96-5.963zm2.49 9.182l-2.49-2.486-2.49 2.486-.73-.734 2.49-2.485-2.49-2.485.73-.733 2.49 2.485 2.49-2.485.73.733-2.49 2.485 2.49 2.485z",transform:"translate(-7916 -377)"}})])]):e._e()])])})),0)],1)}),c=[],s=(n("a4d3"),n("e01a"),n("d28b"),n("b0c0"),n("3ca3"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"condition"},[n("span",[e._v(e._s(e.blockObject.title))]),n("span",[e._v(e._s(e.blockObject.beforeInput))]),n("label",["checkbox"===e.blockObject.inputType&&"date"!=e.blockObject.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.blockObject.value1,expression:"blockObject.value1"}],attrs:{placeholder:e.blockObject.placeholder1,type:"checkbox"},domProps:{value:e.blockObject.value1,checked:Array.isArray(e.blockObject.value1)?e._i(e.blockObject.value1,e.blockObject.value1)>-1:e.blockObject.value1},on:{input:function(t){return e.input1(t)},change:function(t){var n=e.blockObject.value1,i=t.target,o=!!i.checked;if(Array.isArray(n)){var r=e.blockObject.value1,a=e._i(n,r);i.checked?a<0&&e.$set(e.blockObject,"value1",n.concat([r])):a>-1&&e.$set(e.blockObject,"value1",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.blockObject,"value1",o)}}}):"radio"===e.blockObject.inputType&&"date"!=e.blockObject.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.blockObject.value1,expression:"blockObject.value1"}],attrs:{placeholder:e.blockObject.placeholder1,type:"radio"},domProps:{value:e.blockObject.value1,checked:e._q(e.blockObject.value1,e.blockObject.value1)},on:{input:function(t){return e.input1(t)},change:function(t){return e.$set(e.blockObject,"value1",e.blockObject.value1)}}}):"date"!=e.blockObject.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.blockObject.value1,expression:"blockObject.value1"}],attrs:{placeholder:e.blockObject.placeholder1,type:e.blockObject.inputType},domProps:{value:e.blockObject.value1,value:e.blockObject.value1},on:{input:[function(t){t.target.composing||e.$set(e.blockObject,"value1",t.target.value)},function(t){return e.input1(t)}]}}):n("DatePicker",{attrs:{startValue:e.blockObject.value1},on:{input:function(t){return e.input1(t)}}}),"checkbox"==e.blockObject.inputType?n("span",{staticClass:"styled-check"}):e._e(),e.blockObject.variables?n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentVariables.length>0&&e.showVariables,expression:"currentVariables.length > 0 && showVariables"}],staticClass:"options"},[n("ul",e._l(e.currentVariables,(function(t,i){return n("li",{key:i,staticClass:"opt",on:{click:function(n){return e.selectOption(t)}}},[e._v(e._s(t))])})),0)]):e._e()],1),"double"==e.blockObject.inputs?n("span",[e._v(e._s(e.blockObject.betweenInput))]):e._e(),"checkbox"===e.blockObject.inputType&&"double"==e.blockObject.inputs&&"date"!=e.blockObject.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.blockObject.value2,expression:"blockObject.value2"}],attrs:{placeholder:e.blockObject.placeholder2,type:"checkbox"},domProps:{value:e.blockObject.value2,checked:Array.isArray(e.blockObject.value2)?e._i(e.blockObject.value2,e.blockObject.value2)>-1:e.blockObject.value2},on:{input:function(t){return e.input2(t)},change:function(t){var n=e.blockObject.value2,i=t.target,o=!!i.checked;if(Array.isArray(n)){var r=e.blockObject.value2,a=e._i(n,r);i.checked?a<0&&e.$set(e.blockObject,"value2",n.concat([r])):a>-1&&e.$set(e.blockObject,"value2",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.blockObject,"value2",o)}}}):"radio"===e.blockObject.inputType&&"double"==e.blockObject.inputs&&"date"!=e.blockObject.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.blockObject.value2,expression:"blockObject.value2"}],attrs:{placeholder:e.blockObject.placeholder2,type:"radio"},domProps:{value:e.blockObject.value2,checked:e._q(e.blockObject.value2,e.blockObject.value2)},on:{input:function(t){return e.input2(t)},change:function(t){return e.$set(e.blockObject,"value2",e.blockObject.value2)}}}):"double"==e.blockObject.inputs&&"date"!=e.blockObject.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.blockObject.value2,expression:"blockObject.value2"}],attrs:{placeholder:e.blockObject.placeholder2,type:e.blockObject.inputType},domProps:{value:e.blockObject.value2,value:e.blockObject.value2},on:{input:[function(t){t.target.composing||e.$set(e.blockObject,"value2",t.target.value)},function(t){return e.input2(t)}]}}):e._e(),"double"==e.blockObject.inputs&&"date"==e.blockObject.inputType?n("DatePicker",{attrs:{startValue:e.blockObject.value2},on:{input:function(t){return e.input2(t)}}}):e._e(),n("span",[e._v(e._s(e.blockObject.afterInput))])],1)}),l=[],u=(n("4de4"),n("c975"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("date-picker",{attrs:{type:"date","value-type":"timestamp"},on:{input:function(t){return e.selectDate(t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})}),d=[],p=(n("a9e3"),n("ec45")),b=(n("107a"),n("411c"),{components:{DatePicker:p["default"]},props:{startValue:String|Number},data:function(){return{value:this.startValue?new Date(Number(this.startValue)).getTime():""}},methods:{selectDate:function(e){this.$emit("input",e)}},created:function(){this.selectDate(this.value)}}),h=b,v=n("2877"),f=Object(v["a"])(h,u,d,!1,null,null,null),g=f.exports,m={name:"Condition",data:function(){return{showVariables:!1,currentVariables:[]}},props:{blockObject:Object},methods:{selectOption:function(e){this.blockObject.value1=e,this.showVariables=!1},input1:function(e){if(isNaN(+e)){var t=this.blockObject.value1.toLowerCase();""!=t&&this.blockObject.variables&&"false"!==this.blockObject.variables?(this.showVariables=!0,this.currentVariables=this.blockObject.variables.filter((function(e){if(e.toLowerCase().indexOf(t)>=0)return e}))):this.currentVariables=this.blockObject.variables}else this.blockObject.value1=e;this.$emit("child_input",{event:this.blockObject,number:1})},input2:function(e){console.log(!isNaN(+e)),isNaN(+e)||(this.blockObject.value2=e),this.$emit("child_input",{event:this.blockObject,number:2})}},created:function(){var e=this;document.addEventListener("click",(function(t){e.showVariables=!1}))},components:{DatePicker:g}},k=m,y=(n("16d6"),Object(v["a"])(k,s,l,!1,null,null,null)),_=y.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select"},[n("transition",{attrs:{name:"fade"}},[e.isActive?n("div",{staticClass:"wrap"},e._l(e.select,(function(t,i){return n("div",{key:i,staticClass:"option",on:{click:function(t){return e.returnSelected(i)}}},[e._v(" "+e._s(t.name)+" ")])})),0):e._e()])],1)},w=[],j=(n("99af"),{name:"Variants",props:{isActive:Boolean},data:function(){return{select:[{name:"Бюджет",type:"integer",variables:!1},{name:"Ответственный",type:"string",variables:!!window.market&&(!!window.market.Managers&&window.market.Managers.Names)},{name:"Название компании",type:"string",variables:!!window.market&&(!!window.market.Companies&&window.market.Companies.Names)},{name:"Имя контакта",type:"string",variables:!!window.market&&(!!window.market.Contacts&&window.market.Contacts.Names)},{name:"Дата создания",type:"date",variables:!1}]}},methods:{returnSelected:function(e){this.$emit("selecting",{name:this.select[e].name,type:this.select[e].type,variables:this.select[e].variables})}},created:function(){window.market&&window.market.ColorDeal&&(this.select=this.select.concat(window.market.ColorDeal.Variants))}}),C=j,x=(n("3940"),n("023d"),Object(v["a"])(C,O,w,!1,null,null,null)),B=x.exports,$={name:"RepeaterCondition",data:function(){return{}},mounted:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this.conditionsArray[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;r.isActive=!1}}catch(a){t=!0,n=a}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},created:function(){var e=this;document.addEventListener("click",(function(t){if(!t.target.closest(".change")){var n=!0,i=!1,o=void 0;try{for(var r,a=e.conditionsArray[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value;c.isActive=!1}}catch(s){i=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}}}))},props:{title:String,conditionsArray:Array},methods:{addCondition:function(e){this.conditionsArray.splice(e+1,0,{title:"Бюджет",beforeInput:"от",inputType:"number",placeholder1:"0",value1:"",betweenInput:"до",placeholder2:"0",value2:"",afterInput:"руб.",inputs:"double",isActive:!1,variables:!1}),this.$emit("change_state",this.conditionsArray)},deleteCondition:function(e){this.conditionsArray.splice(e,1),this.$emit("change_state",this.conditionsArray)},changeCondition:function(e){this.conditionsArray[e].isActive=!this.conditionsArray[e].isActive,this.$emit("change_state",this.conditionsArray)},selectingVar:function(e,t){var n=this.conditionsArray[e];n.title=t.name?t.name:"",n.value1=t.value1?t.value1:"",n.value2=t.value2?t.value2:"",n.variables=!!t.variables&&t.variables,n.isActive=!1,"string"==t.type?(n.beforeInput="",n.betweenInput="",n.afterInput="",n.placeholder1="",n.inputs="single",n.inputType="text"):"boolean"==t.type?(n.beforeInput="",n.betweenInput="",n.afterInput="",n.inputs="single",n.inputType="checkbox"):"integer"==t.type?(n.beforeInput="от",n.placeholder1="0",n.betweenInput="до",n.placeholder2="0",n.afterInput="",n.inputs="double",n.inputType="number"):"date"==t.type&&(n.beforeInput="с",n.betweenInput="по",n.afterInput="",n.placeholder1="",n.inputs="double",n.inputType="date"),this.$emit("change_state",this.conditionsArray)},changingChild:function(e,t){1==t.number?this.conditionsArray[e].value1=t.event.value1:2==t.number&&(this.conditionsArray[e].value2=t.event.value2),this.$emit("change_state",this.conditionsArray)}},components:{Condition:_,Variants:B}},A=$,P=(n("cb1a"),n("e8c4"),Object(v["a"])(A,a,c,!1,null,null,null)),M=P.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"picker-wrap"},[n("input",{staticClass:"picker-button",style:{borderColor:e.bgColor},attrs:{type:"text"},domProps:{value:e.bgColor},on:{click:e.openPicker,input:function(t){return e.changeColor(t)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpened,expression:"isOpened"}],ref:"picker",staticClass:"picker-modal",style:{borderColor:e.bgColor}},[n("div",{staticClass:"picker-close",on:{click:e.closePicker}},[e._v("×")]),n("div",{staticClass:"color-picker"})])])},I=[],N=(n("ac1f"),n("5319"),n("2d08").ColorPicker),S={name:"ColorPicker",data:function(){return{isOpened:!1}},props:{bgColor:String,index:Number},methods:{openPicker:function(){this.isOpened=!0},closePicker:function(){this.isOpened=!1},changeColor:function(e){window.colorPickerObject[this.index].value=e.target.value.replace("#","")}},mounted:function(){var e=this,t=this;window.colorPickerObject||(window.colorPickerObject=[]),window.colorPickerObject[this.index]=new N({dom:t.$refs.picker.querySelector(".color-picker"),value:t.bgColor}),window.colorPickerObject[this.index].addEventListener("change",(function(t){e.$store.state.conditions[e.index].color="#"+window.colorPickerObject[e.index]._value}))}},E=S,D=(n("c17f"),n("62c3"),Object(v["a"])(E,V,I,!1,null,null,null)),F=D.exports,T=n("2f62"),L=n("bc3a").default;function W(){var e=""+Math.floor(255*Math.random()).toString(16)+Math.floor(255*Math.random()).toString(16)+Math.floor(255*Math.random()).toString(16);while(e.length<6)e+="e";return"#"+e}i["a"].use(T["a"]);var R=new T["a"].Store({state:{conditions:[{title:"Для всех сделок, у которых:",color:W(),isBorder:!0,isBg:!1,settings:[{title:"Бюджет",beforeInput:"от",inputType:"number",placeholder1:"0",value1:"",betweenInput:"до",placeholder2:"0",value2:"",afterInput:"руб.",inputs:"double",isActive:!1}]}]},mutations:{addConditionsGroup:function(e,t){e.conditions.push(t)},removeConditionsGroup:function(e,t){e.conditions.splice(t,1)},changeConditionsGroup:function(e,t){e.conditions[t.index].settings=t.object,e.conditions[t.index].settings.isActive=!1},setConditions:function(e,t){e.conditions=t}}}),Y={name:"App",store:R,data:function(){return{conditions:[{title:"Для всех сделок, у которых:",color:W(),isBorder:!0,isBg:!1,settings:[{title:"Бюджет",beforeInput:"от",inputType:"number",placeholder1:"0",value1:"",betweenInput:"до",placeholder2:"0",value2:"",afterInput:"руб.",inputs:"double",isActive:!1}]}]}},methods:{addConditionsGroup:function(e){R.commit("addConditionsGroup",{title:"Для всех сделок, у которых:",color:W(),isBorder:!0,isBg:!1,settings:[{title:"Бюджет",beforeInput:"от",inputType:"number",placeholder1:"0",value1:"",betweenInput:"до",placeholder2:"0",value2:"",afterInput:"руб.",inputs:"double",isActive:!1}]})},updateStatefromChild:function(e,t){R.commit("changeConditionsGroup",{index:e,object:t})},deleteCondition:function(e){R.commit("removeConditionsGroup",e)},save:function(){window.market.ColorDealsSettings=this.$store.state.conditions}},components:{RepeaterCondition:M,ColorPicker:F},mounted:function(){L({method:"get",url:"https://core.market.ru/color_deals/index.php?request=get&domain="+window.AMOCRM.widgets.system.domain}).then((function(e){console.log(e.data),!1!==e.data&&e.data.conditions&&R.commit("setConditions",e.data.conditions)})).catch((function(e){console.log(e)}))}},X=Y,G=(n("cf25"),Object(v["a"])(X,o,r,!1,null,null,null)),q=G.exports;i["a"].config.productionTip=!1,new i["a"]({el:"#market_color_deals",render:function(e){return e(q)}})},"56db":function(e,t,n){},"62c3":function(e,t,n){"use strict";var i=n("5161"),o=n.n(i);o.a},"70d4":function(e,t,n){},"982f":function(e,t,n){},c17f:function(e,t,n){"use strict";var i=n("982f"),o=n.n(i);o.a},cb1a:function(e,t,n){"use strict";var i=n("70d4"),o=n.n(i);o.a},cccf:function(e,t,n){},cf25:function(e,t,n){"use strict";var i=n("fea6"),o=n.n(i);o.a},e8c4:function(e,t,n){"use strict";var i=n("56db"),o=n.n(i);o.a},fea6:function(e,t,n){}});
//# sourceMappingURL=app.dc72a0fc.js.map